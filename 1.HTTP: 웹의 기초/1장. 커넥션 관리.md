## 04. 커넥션 관리  
  - HTTP는 어떻게 TCP 커넥션을 사용하는가
  - TCP 커넥션의 지연, 병목, 막힘
  - 병렬 커넥션, keep-alive 커넥션, 커넥션 파이프라인을 활용한 HTTP의 최적화
  - 커넥션 관리를 위해 따라야 할 규칙들
### 4.1 TCP 커넥션
  - 전 세계 모든 HTTP 통신은 패킷 교환 네트워크 프로토콜들의 계층화된 집합인 TCP/IP를 통해 이루어진다.
  - 일단 커넥션이 맺어지면 클라이언트와 서버 컴퓨터 간에 주고받는 메세지들은 손실 혹은 손상되거나 순서가 바뀌지 않고 안전하게 전달된다.
  - 커넥션의 과정
    1. URL을 통해 IP주소, 포트 번호를 얻는다.
    2. 브라우저가 IP주소, 포트 번호를 이용해 TCP 커넥션을 생성한다.
    3. 브라우저가 서버로 HTTP 요청 메세지를 보낸다.
    4. 브라우저가 서버에서 온 HTTP 응답 메세지를 읽는다.
    5. 브라우저가 커넥션을 끊는다.
### 4.1.1 신뢰할 수 있는 데이터 전송 통로인 TCP
  - TCP 커넥션은 인터넷을 안정적으로 연결해준다.
  - TCP 커넥션의 한쪽에 있는 바이트들은 반대쪽으로 순서에 맞게 정확하게 전달된다.
### 4.1.2 TCP 스트림은 세그먼트로 나뉘어 IP 패킷을 통해 전송된다.
  - TCP는 IP 패킷이라고 불리는 작은 조각을 통해 데이터를 전송한다.
  - TCP는 세그먼트라는 단위로 데이터 스트림을 잘게 나누고, 세그먼트를 IP패킷에 담아 인터넷을 통해 데이터를 전달한다.
  - IP 패킷에는 다음과 같은 내용이 들어있다.
    - IP 패킷 헤더 : 발신지와 목적지 IP주소, 크기, 기타 플래그 등등을 가진다.
    - TCP 세그먼트 헤더 : TCP 포트번호, TCP 제어 플래그, 데이터의 순서와 무결성을 검사하기 위해 사용되는 숫자 값
    - TCP 데이터 조각
### TCP 커넥션 유지하기
  - TCP는 포트 번호를 통해서 여러 개의 커넥션을 유지한다.
  - TCP 커넥션은 네가지 값으로 식별한다.
    - `<발신지 IP 주소, 발신지 포트, 수신지 IP 주소, 수신지 포트>`
