## 03.HTTP 메시지
  - HTTP가 인터넷의 배달원이라면, HTTP메시지는 무언가를 담아 보내는 소포같다.  
### 3.1 메시지의 흐름
  - HTTP메시지는 HTTP 애플리케이션 간에 주고 받은 데이터 블록들이다.
### 3.1.1 메세지는 원서버 방향을 인바운드로 하여 송신된다.
  - 이번 절은 내용이 다 중요해서 그대로 옮긴다....
  - HTTP에서 트랜잭션의 방향을 설명하기 위해 인바운드와 아웃바운드를 사용한다.
  - 메시지가 원 서버로 향하는 것을 인바운드(`클라이언트 -> 서버`)
  - 모든 처리가 끝난 뒤 메시지가 사용자에게 돌아오는것이 아웃바운드(`서버 -> 클라이언트`)
### 3.1.2 다운스트림으로 흐르는 메시지
  - 요청 메시지냐, 응답 메시지냐에 관계 없이 모든 메시지는 다운스트림으로 흐른다.
  - 클라이언트 -> 프록시1 -> 프록시2 -> 서버 -> 프록시2 -> 프록시1 -> 클라이언트 이 흐름을 생각하면 다운스트림이라는 말이 이해가 될 것이다.
### 3.2 메시지의 각 부분
  - 메시지는 `시작줄`, `헤더블록`, `본문`으로 이루어져있다.
  - 시작줄은 어떤 메시지인지 서술하며, 헤더블록은 속성(ex: Context-Type, Context-length 각각 본문이 뭔지, 길이가 어떤지를 나타낸다.)을 본문은 단순히 데이터를 담고 있다.
  - 엔티티 본문이나 메시지 본문(혹은 그냥 '본문')은 단순히 선택적인 데이터 덩어리이다.
  - 예를 들어 Content-Type줄은 본문이 무엇인지 설명해준다. Content-Length줄은 본문의 크기 혹은 길이를 말해준다.
### 3.2.1 메시지 문법
  - `요청 메시지`: 웹 서버에 어떤 동작을 요구한다.
  - `응답 메시지`: 요청의 결과를 클라이언트에게 돌려준다.
  - 요청 메시지의 형식
    ```html
    <메서드> <요청 URL> <버전>
    <헤더>
      (공백)
    <엔티티 본문>
    ```
  - 응답 메시지의 형식
    ```html
    <버전> <상태 코드> <사유 구절>
    <헤더>
      (공백)
    <엔티티 본문>
    ```
  - 메서드
    - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작이다.
    - ex: `GET`,`HEAD`,`POST` 등등
  - 요청 URL
    - 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소이다.
  - 버전
    - 사용중인 HTTP의 버전이다. 
    - 형식은  `HTTP/<메이저>.<마이너>`로 이루어져있고 메이저와 마이너는 모두 정수이다.
  - 상태코드
    - 요청 중에 무엇이 일어났는지 설명하는 세 자리 숫자다. 각 코드의 첫번째 자릿수로 상태의 일반적인 분류를 나타낸다.
  - 사유 구정
    - 상태 코드의 의미를 짧은 문구로 문자열로 나타낸 구절이다.
  - 헤더들
    - 이름, 콜론(:), 공백, CRLF가 순서대로 나타다는 헤더들이 며 헤더의 끝은 빈줄(CRLF)로 끝이 난다.
  - 엔티티 본문
    - 본문이 가지고 있는 임의의 데이터 블록을 포함한다.
    - 헤더나 엔티티 본문이 없더라도 HTTP 헤더의 집합은 항상 빈 줄(CRLF)로 끝난다.
### 3.2.2 시작줄
  - 모든 HTTP 메시지는 시작줄로 시작한다. 요청 메시지의 시작줄은 무엇을 해야할지 알려주며 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.
  - 요청줄
    - 요청줄에서는 메소드(어떤동작이 일어나야하는지), 요청 URL(동작 대상), HTTP 버전( 어떤 HTTP 버전을 쓰는지)를 포함하고 있다.
    - 위 모든 필드는 공백으로 구분된다.
  - 응답줄
    - 응답 메시지는 수행결과에 대한 상태정보와 결과 데이터를 클라이언트에게 준다.
    - 응답 메시지의 시작줄은 HTTP 버전, 숫자로 된 상태코드, 사유 구절이 들어 있다.
  - 메서드
    - 요청의 시작줄은 메서드로 시작하며, HTTP 명세는 공통 요청 메서드의 집합을 정의한다.
      |메서드|설명|메시지 본문이 있는가?|
      |-----|---|-------------------|
      |GET|서버에서 어떤 문서를 가져온다.|없음|
      |HEAD|서버에서 어떤 문서에 대해 헤더만 가져온다.|없음|
      |POST|서버가 처리해야 할 데이터를 보낸다.|있음|
      |PUT|서버에 요청 메시지의 본문을 저장한다.|있음|
      |TRACE|메시지가 프록시를 거쳐 서버에 도달하는 과정을 추적한다.|없음|
      |OPTIONS|서버가 어떤 메서드를 수행할 수 있느닞 확인한다.|없음|
      |DELETE|서버에서 문서를 제거한다.|없음|
  - 상태코드
    - 상태 코드는 클라이언트에게 무엇이 일어났는지 말해준다.
      |전체 범위|정의된 범위|분류|
      |-------|----------|----|
      |100-199|100-101|정보|
      |200-299|200-206|성공|
      |300-399|300-305|리다이렉션|
      |400-499|400-415|클라이언트 에러|
      |500-599|500-505|서버 에러|
  - 사유 구절
    - 사유 구절은 시작줄의 마지막 요소이다.
    - 상태코드에 대한 글로 된 설명을 제공한다.
  - 버전 번호
    - 요청과 응답 메시지 양쪽 모두 시술되어 있다.
    - HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단이 된다.
### 3.2.3 헤더
  - HTTP 헤더 필드는 요청과 응답 메시지에 추가 정보를 더한다.
  - 헤더 분류
    - 일반 헤더: 요청과 응답 양쪽에서 모두 나타날 수 있다.
    - 요청 헤더: 요청에 대한 부가 정보를 제공
    - 응답 헤더: 응답에 대한 부가 정보를 제공
    - Entity 헤더: 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술
    - 확장 헤더: 명세에 정의되지 않은 새로운 헤더
  - 헤더를 여러 줄로 나누기위해서는 줄내림후 최소 하나의 스페이스 혹은 탭 문자가 와야된다.
### 3.2.4 엔티티 본문
  - HTTP 메세지의 본문에 해당하는 부분
### 3.2.5 버전 0.9 메세지
  - HTTP 0.9 메세지도 요청과 응답으로 이루어져 있지만 요청은 그저 에서드와 요청URL을 갖고, 응답은 오직 엔티티로만으로 이루어져 있다.
  - 게다가 너무 단순해서 다양한 상황에 대응이 불가능하다.
### 3.3 메서드
  - 모든 서버가 모든 메서드를 구현하지 않는다.
  - 또한 사용되는 메서드는 사이트 또는 서버에 마다 다르다.
### 3.3.1 안전한 메서드(Safe Method)
  - GET이나 HEAD메서드를 사용하는 HTTP요청의 결과로 서버에 어떤 작용도 없음을 의미한다.
### 3.3.2 GET
  - 주로 서버에게 리소스를 달라고 요청하기 위해 쓰인다.
### 3.3.3 HEAD
  - HEAD 메서드는 GET처럼 행동하지만 서버는 응답으로 헤더만을 돌려준다.
  - 리소스를 가져오지 않고도 그에 대해 무엇인가(타입이나 길이 등등)을 알아낼 수 있다.
  - 응답의 상태 코드를 통해, 개체가 존재하는지 확인할 수 있다.
  - 헤더를 확인하여 리소스가 변경되었느지 검사할 수 있다.
### 3.3.4 PUT
  - PUT 메서드는 서버에 문서를 쓴다.
  - PUT메서드의 의미는 서버가 요청의 본문을 가지고 요청 URL의 이름대로 새문서를 만들거나, 이미 URL이 존재한다면 본문을 사용해서 교체하는 것이다.
### 3.3.5 POST
  - POST 메서드는 서버에 입력 데이터를 전송하기 위해 설계되었다.
  - 예로 HTML의 form태그에 담긴 데이터를 서버에 전송한다.
### 3.3.6 TRACE
  - TRACE는 클라이언트에게 자신의 요청이 서버에 도달했을때 어떻게 보이게 되는지 알려준다.
  - 자세하게는 클라이언트에서 요청을 보내면 요청이 방화벽, 프록시, 게이트웨이 등의 어플리케이션을 통과하는데 이 과정을 거쳐 도달했을때의 결과를 보여준다.
  - 주로 요청이 어떤 영향을 미치는지 확인할때 사용된다.
### 3.3.7 OPTIONS
  - OPTIONS 메서드는 웹 서버에게 여러가지 종류의 지원 범위에 대해 물어본다.
